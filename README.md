## Credit Service API (Django REST Framework)

### Проєкт

Цей репозиторій містить бекенд-сервіс, побудований на **Django REST Framework (DRF)**, призначений для управління фінансовими об'єктами (Кредитами та Платежами). Проєкт повністю контейнеризовано за допомогою **Docker Compose**.

### Стек Технологій

  * **Фреймворк:** Django 5.x
  * **API:** Django REST Framework (DRF)
  * **База даних:** SQLite3 (файл `db.sqlite3`)
  * **Контейнеризація:** Docker та Docker Compose (V2)
  * **Мова:** Python 3.11+

-----

## Розгортання та Запуск (Docker)

Для запуску проєкту потрібні лише встановлені Docker та Docker Compose.

### 1\. Передумови

Переконайтеся, що на вашій системі встановлено:

1.  [Docker Engine](https://docs.docker.com/engine/install/)
2.  [Docker Compose](https://docs.docker.com/compose/install/)

### 2\. Запуск Проєкту

Виконайте ці команди у кореневій папці проєкту:

```bash
# 1. Збірка образу та запуск контейнера у фоновому режимі (-d)
# Ця команда автоматично виконає міграції перед запуском сервера.
docker-compose up --build -d
```

### 3\. Доступ до Сервісу

Після запуску контейнера, API буде доступно локально:

| Опис | URL |
| :--- | :--- |
| **Базовий URL API** | **http://localhost:8000/api/** |

### 4\. Керування Контейнерами

| Дія | Команда |
| :--- | :--- |
| **Зупинити сервіс** | `docker-compose down` |
| **Переглянути логи** | `docker-compose logs -f web` |
| **Виконати команду в контейнері** | `docker-compose exec web bash` (для відкриття терміналу) |

-----

## Розробка та Тестування

### 1\. Виконання Міграцій та Тестів

Ви можете запускати Django-команди безпосередньо в контейнері:

```bash
# Застосування міграцій (якщо змінилася модель)
docker-compose exec web python manage.py migrate product

# Запуск юніт-тестів для додатку
docker-compose exec web python manage.py test product
```

### 2\. Налаштування VS Code для Дебагу (Рекомендовано)

Для покрокового налагодження (debugging) у VS Code:

1.  Встановіть усі необхідні залежності у локальне віртуальне середовище (`venv`).
2.  Переконайтеся, що файли `.vscode/settings.json` та `.vscode/launch.json` налаштовані (ці налаштування фіксують шлях до локального `venv`).
3.  Встановіть точку зупину (Breakpoint) у коді (наприклад, у `product/tests.py`).
4.  На вкладці **Run and Debug** (`Ctrl+Shift+D`) виберіть конфігурацію **`Python: Django Tests (Debug)`** і запустіть її.

-----

## Доступні API Ендпоінти

| Призначення | Метод | URL-префікс |
| :--- | :--- | :--- |
| **Створення Credit** | `POST` | `/api/credits/` |
| **Обробка платежу** | `POST` | `/api/change_payment/` |

-----

## Створення Кредиту (Credit Creation)

Цей JSON-об'єкт використовується для **`POST`**-запиту на ендпоінт **створення** нового об'єкта `Credit`.

**Ендпоінт:** `/api/credits/`

### Payload для /api/credits/

```json
{
    "amount": 1000,
    "loan_start_date": "10-01-2024",
    "number_of_payments": 4,
    "periodicity": "3w",
    "interest_rate": 0.1
}
```

| Поле | Тип | Опис |
| :--- | :--- | :--- |
| `amount` | Integer | Сума кредиту. |
| `loan_start_date` | String | Дата початку кредиту у форматі **РРРР-ММ-ДД**. |
| `number_of_payments` | Integer | Загальна кількість платежів. |
| `periodicity` | String | Періодичність платежів (наприклад, '3w' = 3 тижні, '1m' = 1 місяць). |
| `interest_rate` | Decimal | Річна відсоткова ставка (наприклад, 0.10 = 10%). |

-----

## Обробка Платежу (Change Payment)

Цей JSON-об'єкт використовується для **`POST`**-запиту на ендпоінт **обробки/зміни платежу**, де всі параметри передаються у тілі запиту.

**Ендпоінт:** `/api/change_payment/`

### Payload для /api/change\_payment/

```json
{
    "id": 1,
    "number": 2,
    "sum": 100
}
```

| Поле | Тип | Опис |
| :--- | :--- | :--- |
| `id` | Integer | **ID** кредиту, до якого застосовується платіж. |
| `number` | Integer | Номер платежу. |
| `sum` | Decimal/Integer | Сума на яку треба зменьшити платіж. |
